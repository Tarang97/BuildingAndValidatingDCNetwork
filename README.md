# Building and Validating Data Center Network with Batfish and Ansible

In this project, I have demonstrate to automate the Cisco Switches in a typical data center environment in a leaf-spine architecture. I have explore how to interact with Cisco devices using Ansible, and how to deploy Virtual Local Area Networks (VLANs), Virtual Extensible LANs (VxLAN) in a Border Gateway Protocol/Ethernet Virtual Private Network (BGP/EVPN) setup on the Cisco switches using various Ansible modules. 
Usually, in my knowledge, I know that network validation performed after pushing the configuration into network devices and then we collect the network state and validate it to aligned with the intended state. However, along with building and pushing this configuration, I also came to know that we can also validate the network state prior to pushing the configuration on the devices. 
For that, I have used the Batfish which is an Open source project that targets this use case. 

# What is Batfish?
Batfish uses a client/server model. With this, we run a Batfish server instance (written in Java), and we communicate with the server using a client-side software development kit (SDK) called Pybatfish (written in Python). We then initialize a snapshot of our network using our network configuration files, and, based on this network snapshot, the Batfish server computes a data model for our network. Using the client, we can start to ask questions to validate our network using this vendor-neutral data model.

The Batfish team has developed multiple Ansible modules that wrap around the Pybatfish client library to retrieve the data model generated by the Batfish server. The modules allow us to perform different queries against this network model to validate our network state. The diagram that appears next outlines the interaction between Ansible, Pybatfish, and the Batfish server.

With this tool, I have generated the network state in offline mode using Jinja2 template and validated that configuration using this tool. The best use case of this tool is, it can provide validation and correctness guarantee for security, complaince, and traffic forwarding which is necessary to be compliant according to an organizations network infrastructure. 
As I said, I have generated the network state in offline mode using Jinja2 template, this tool uses that configuation to build a neural data model and forwarding tree for the network which can then be use to validate the network with the intended state.

# Technologies used: CentOS 7, Ansible, Batfish (PyBatfish), Python 3.7, Cisco (vIOS)
